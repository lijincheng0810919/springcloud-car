!function(t){"use strict";function r(t){var r;if(!t||"object"!==n(t)||t.nodeType)return!1;try{if(t.constructor&&!v.call(t,"constructor")&&!v.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}for(r in t);return void 0===r||v.call(t,r)}function n(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?p[d.call(t)]||"object":typeof t}function e(t,r){var n=u.createElement("script");n.type="text/javascript",n.async=!0,n.onload=n.onreadystatechange=function(){this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||r&&r()},n.src=t,u.getElementsByTagName("head")[0].appendChild(n)}function i(r,n){n||(n=r,r=m),t.$&&"function"==typeof t.$?t.$(n):e(r,function(){t.$(n)})}function o(r){{var n={};(r||t.location.search).replace(/[?&]+([^=&]+)=([^&]*)/gi,function(r,e,i){n[e]=t.decodeURIComponent(i)})}return n}function a(t){return!/^#|javascript|tel|mailto/i.test(t)}function c(t,n){if(!a(t)||!r(n))return t;var e=t.split("#"),i=e[0].split("?"),o=e[1]||"",c=i[1]||"",f=i[0]||"",u=[],n=Object.assign({},n||{});for(var s in n){var l=new RegExp("(^|&|\\?)"+s+"=([^&]*)(&|$)");c.match(l)?c=""+n[s]?c.replace(l,"$1"+s+"="+encodeURIComponent(n[s])+"$3"):c.replace(l,"$1"):u.push(s+"="+encodeURIComponent(n[s]))}u.length&&c?f+="?"+c+"&"+u.join("&"):c?f+="?"+c:u.length&&(f+="?"+u.join("&"));var p=f+(o?"#"+o:"");return p}function f(){this.params=[],this.filters={},this.locQuery={}}var u=t.document;"function"!=typeof Object.assign&&(Object.assign=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(t),n=1;n<arguments.length;n++){var e=arguments[n];if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t,r){var n;if(null==this)throw new TypeError('"this" is null or not defined');var e=Object(this),i=e.length>>>0;if(0===i)return-1;var o=0|r;if(o>=i)return-1;for(n=Math.max(o>=0?o:i-Math.abs(o),0);i>n;){if(n in e&&e[n]===t)return n;n++}return-1});var s=s||{};s.stringify=s.stringify||function(t){var r=typeof t;if("object"!=r||null===t)return"string"==r&&(t='"'+t+'"'),String(t);var n,e,i=[],o=t&&t.constructor==Array;for(n in t)e=t[n],r=typeof e,"string"==r?e='"'+e+'"':"object"==r&&null!==e&&(e=s.stringify(e)),i.push((o?"":'"'+n+'":')+String(e));return(o?"[":"{")+String(i)+(o?"]":"}")};for(var l={set:function(t,r,n,e,i,o){u.cookie=t+"="+(o?r:encodeURIComponent(r))+(i?"; expires="+i.toGMTString():"")+(e?"; path="+e:"; path=/")+(n?"; domain="+n:"")},get:function(t,r){var n=u.cookie.match(new RegExp("(^| )"+t+"=([^;]*)(;|$)"));return null!=n?decodeURIComponent(n[2]):r},clear:function(t,r,n){this.get(t)&&(u.cookie=t+"="+(r?"; path="+r:"; path=/")+(n?"; domain="+n:"")+";expires=Fri, 02-Jan-1970 00:00:00 GMT")}},p={},d=p.toString,v=p.hasOwnProperty,y="Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),h=0;h<y.length;h++)p["[object "+y[h]+"]"]=y[h].toLowerCase();var g=Array.isArray||function(t){return"array"===n(t)},m=("https:"==u.location.protocol?"https":"http")+"://imgs.xin.com/xin/js/lib/jquery-1.8.1.min.js";f.prototype={constructor:f,init:function(t){function r(t){-1===e.indexOf(t)?e.push(t):null,n.filters[t]=null}var n=this,e=n.params;if("string"==typeof t)r(t);else if(g(t))for(var i=0;i<t.length;i++)r(t[i]);var a=o()||{};for(var c in a)-1!=n.params.indexOf(c)&&void 0!=a[c]&&(n.locQuery[c]=a[c])},_fixHref:function(t){var r=this.filters,n={};for(var e in r){var i=this.filterParam(e,t);i!==!1&&(n[e]=i)}return c(t,n)},filterParam:function(t,r){var n=this.filters,e=o()[t];if(!e)return!1;if(g(n[t]))return-1===n[t].indexOf(e)?!1:e;if("function"==typeof n[t]){var i=n[t](e,r);return void 0==i?e:i}return e},regFilter:function(t,r){var n=this,e=n.params,i=n.filters;-1!==e.indexOf(t)&&("string"==typeof r?i[t]=[r]:g(r)?i[t]=[].concat.call(i[t]||[],r):"function"==typeof r&&(i[t]=r))},filter:function(t,n){if(r(t)&&!n)for(var e in t)this.regFilter(e,t[e]);else this.regFilter(t,y);return this.fix(),this},clear:function(t){this.init(t||this.params)},fix:function(){var r=this;i(function(){function n(t,r){for(var n=t.parentNode;n;){if(n.nodeName===r)return n;n=n.parentNode}return null}document.onclick=function(e){e=e||t.event;var i=e.srcElement||e.target,o="A";if(i.nodeName!==o&&(i=n(i,o)),i&&i.nodeName===o){var c=i.getAttribute("href");if(c&&a(c)){e.preventDefault?e.preventDefault():e.returnValue=!1;var f=i.getAttribute("target");"_blank"===f?t.open(r._fixHref(c),"_blank"):location.href=r._fixHref(c)}}}})}};var b=new f,j={getUrlParam:function(t){var n=o();return"string"==typeof t?n[t]||"":r(t)?Object.assign({},n,t):n},loadScript:e,fixHref:function(t,r,n){return n!==!1&&(r=Object.assign(b.locQuery,r||{})),c(t,Object.assign({},r||b.locQuery,o(t)))},init:function(t){b.init(t)},filter:function(t,r){b.filter(t,r)},fix:function(t){b.fix(t)},$ready:i};t.UrlTool=j,t.Cookie=l,t.diffArray=function(t,r){var n=t.length,e=r.length,i=null,o=null;return n>e?(o=t.slice(0),i=r.slice(0)):(o=r.slice(0),i=t.slice(0)),o.filter(function(t){return-1===i.indexOf(t)})}}(window);var ingores=window.Ingnore_url_params,tran_querys=["from","channel","abversion","case","lpopt","platform","appver","source_type","keywordid","creative","mediaid"];ingores&&Array.isArray(ingores)&&(tran_querys=diffArray(tran_querys,ingores)),UrlTool.init(tran_querys),UrlTool.filter({channel:function(t){return t&&/^[\-\w]+$/.test(t)?t:!1},abversion:function(t){var r=t.toLowerCase();return r},"case":function(t){return t&&/^[\w]+$/.test(t)?t:!1},lpopt:function(t){return t&&/^[\w]+$/.test(t)?t:void 0},keywordid:function(t){return t&&/^[\w]+$/.test(t)?t:void 0},creative:function(t){return t&&/^[\w]+$/.test(t)?t:void 0},mediaid:function(t){return t&&/^[\w]+$/.test(t)?t:void 0}});